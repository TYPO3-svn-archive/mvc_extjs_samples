{namespace ext=Tx_MvcExtjs_ViewHelpers}
<!--
This container handles the pageRenderer in the background
Specifiy which js librarys should be loaded and tell him something about
concatenating and compressing included js files
-->
<ext:Be.moduleContainer
	pageTitle="ViewBasedModule"
	enableJumpToUrl="false"
	enableClickMenu="false"
	loadPrototype="true"
	loadScriptaculous="true"
	loadExtJs="true"
	loadExtJsTheme="false"
	extJsAdapter="prototype"
	concatenate="false"
	compressJs="false">
	<!-- load needed JS Files -->
	<ext:includeJsFile name="ux.TYPO3.MvcExtjs.DataWriter.js" extKey="mvc_extjs" />
	<ext:includeJsFile name="ux.TYPO3.MvcExtjsSamples.HelloWordPanel.js" />
	<ext:includeJsFile name="ux.TYPO3.MvcExtjsSamples.MovieManager.js" />
	<ext:includeJsFile name="RowEditor.js" />
	<ext:includeJsFile name="Genre/ux.TYPO3.MvcExtjsSamples.Genre.GridPanel.js" />
	<ext:includeJsFile name="Movie/ux.TYPO3.MvcExtjsSamples.Movie.GridPanel.js" />
	<!-- create inline JS based on the Domain Model Definitions -->
	<!-- create needed stores-->
	<ext:jsCode.store
		domainModel="Genre"
		id="GenreStore"
		reader="new MvcExtjsSamples.ViewBasedModule.GenreJsonReader"
		writer="new MvcExtjsSamples.ViewBasedModule.GenreDataWriter"
		proxy="new MvcExtjsSamples.ViewBasedModule.GenreHttpProxy"
		autoLoad="true">
		<ext:jsCode.jsonReader
			domainModel="Genre" />
		<ext:jsCode.dataWriter
			domainModel="Genre"
			moduleName="user_MvcExtjsSamplesViewbased"/>
		<ext:jsCode.httpProxy
			domainModel="Genre"
			controller="Genre"
			api="{
				read:'index',
				update:'update',
				create:'create',
				destroy:'delete'
				}" />
	</ext:jsCode.store>
	<ext:jsCode.store
		domainModel="Movie"
		id="MovieStore"
		reader="new MvcExtjsSamples.ViewBasedModule.MovieJsonReader"
		writer="new MvcExtjsSamples.ViewBasedModule.MovieDataWriter"
		proxy="new MvcExtjsSamples.ViewBasedModule.MovieHttpProxy"
		autoLoad="true">
		<ext:jsCode.jsonReader
			domainModel="Movie" />
		<ext:jsCode.dataWriter
			domainModel="Movie"
			moduleName="user_MvcExtjsSamplesViewbased"/>
		<ext:jsCode.httpProxy
			domainModel="Movie"
			controller="Movie"
			api="{
				read:'movies',
				update:'update',
				create:'create',
				destroy:'delete'
				}" />
	</ext:jsCode.store>
	<!-- create needed column definitions for the grid panels -->
	<ext:jsCode.columnDefinition
		domainModel="Genre"
		editors="{
			name: 'MvcExtjsSamples.ViewBasedModule.GenreEditorConfig'
		}"
		hiddenColumns="{
			0: '_localizationParentUid'
		}">
		<ext:jsCode.config
			name="GenreEditorConfig"
			parameters="{xtype:'textfield'}" />
	</ext:jsCode.columnDefinition>
	<ext:jsCode.columnDefinition
		domainModel="Movie"
		editors="{
			name: 'MvcExtjsSamples.ViewBasedModule.MovieEditorConfig'
		}"
		hiddenColumns="{
			0: '_localizationParentUid'
		}">
		<ext:jsCode.config
			name="MovieEditorConfig"
			parameters="{xtype:'textfield'}" />
	</ext:jsCode.columnDefinition>
	<!-- create Ext.onReady() JS-Code generated by mvc_extjs plus some own stuff like loading stores -->
	<ext:Be.defaultExtOnReadyViewport layout="border" items="{0:'new MvcExtjsSamples.MovieManager',1:'new MvcExtjsSamples.HelloWorldPanel'}"/>
	<ext:includeExtOnReadyFromFile name="ExtOnReady.ViewBasedModule.js" />
</ext:Be.moduleContainer>
